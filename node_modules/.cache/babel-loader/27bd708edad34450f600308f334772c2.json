{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import axiosInstance from'../axiosConfig';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const navigate=useNavigate();const[credentials,setCredentials]=useState({username:'',password:''});const handleChange=e=>{setCredentials({...credentials,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();try{console.log('Sending request with credentials:',credentials);// Log credentials\nconst response=await axiosInstance.post('/api/auth/signin',credentials);// Store the entire user data in local storage\nlocalStorage.setItem('user',JSON.stringify(response.data));// Store user data object\nlocalStorage.setItem('token',response.data.token);// Store the token separately if needed\nnavigate('/dashboard');// Redirect to dashboard\n}catch(error){let errorMessage='Login failed. Please try again.';if(error.response){console.error('Error data:',error.response.data);console.error('Error status:',error.response.status);errorMessage=error.response.data.message||errorMessage;// Adjust based on your API error response\n}else{console.error('Login failed:',error.message);}alert(errorMessage);// Show error message to user\n}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",placeholder:\"Username\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"a\",{href:\"/signup\",children:\"Sign Up\"})]})]});};export default Login;","map":{"version":3,"names":["React","useState","useNavigate","axiosInstance","jsx","_jsx","jsxs","_jsxs","Login","navigate","credentials","setCredentials","username","password","handleChange","e","target","name","value","handleSubmit","preventDefault","console","log","response","post","localStorage","setItem","JSON","stringify","data","token","error","errorMessage","status","message","alert","children","onSubmit","type","placeholder","onChange","required","href"],"sources":["/home/rouaa/Desktop/social-media-front/src/components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axiosInstance from '../axiosConfig';\n\nconst Login = () => {\n  const navigate = useNavigate();\n  const [credentials, setCredentials] = useState({ username: '', password: '' });\n\n  const handleChange = (e) => {\n    setCredentials({ ...credentials, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n        console.log('Sending request with credentials:', credentials); // Log credentials\n        const response = await axiosInstance.post('/api/auth/signin', credentials);\n        // Store the entire user data in local storage\n        localStorage.setItem('user', JSON.stringify(response.data)); // Store user data object\n        localStorage.setItem('token', response.data.token); // Store the token separately if needed\n        navigate('/dashboard'); // Redirect to dashboard\n    } catch (error) {\n        let errorMessage = 'Login failed. Please try again.';\n        if (error.response) {\n            console.error('Error data:', error.response.data);\n            console.error('Error status:', error.response.status);\n            errorMessage = error.response.data.message || errorMessage; // Adjust based on your API error response\n        } else {\n            console.error('Login failed:', error.message);\n        }\n        alert(errorMessage); // Show error message to user\n    }\n};\n\n\n  return (\n    <div>\n      <h2>Login</h2>\n      <form onSubmit={handleSubmit}>\n        <input \n          type=\"text\" \n          name=\"username\" \n          placeholder=\"Username\" \n          onChange={handleChange} \n          required \n        />\n        <input \n          type=\"password\" \n          name=\"password\" \n          placeholder=\"Password\" \n          onChange={handleChange} \n          required \n        />\n        <button type=\"submit\">Login</button>\n      </form>\n      <p>Don't have an account? <a href=\"/signup\">Sign Up</a></p>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,aAAa,KAAM,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3C,KAAM,CAAAC,KAAK,CAAGA,CAAA,GAAM,CAClB,KAAM,CAAAC,QAAQ,CAAGP,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACQ,WAAW,CAAEC,cAAc,CAAC,CAAGV,QAAQ,CAAC,CAAEW,QAAQ,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAG,CAAC,CAAC,CAE9E,KAAM,CAAAC,YAAY,CAAIC,CAAC,EAAK,CAC1BJ,cAAc,CAAC,CAAE,GAAGD,WAAW,CAAE,CAACK,CAAC,CAACC,MAAM,CAACC,IAAI,EAAGF,CAAC,CAACC,MAAM,CAACE,KAAM,CAAC,CAAC,CACrE,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAO,CAAAJ,CAAC,EAAK,CAChCA,CAAC,CAACK,cAAc,CAAC,CAAC,CAClB,GAAI,CACAC,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAEZ,WAAW,CAAC,CAAE;AAC/D,KAAM,CAAAa,QAAQ,CAAG,KAAM,CAAApB,aAAa,CAACqB,IAAI,CAAC,kBAAkB,CAAEd,WAAW,CAAC,CAC1E;AACAe,YAAY,CAACC,OAAO,CAAC,MAAM,CAAEC,IAAI,CAACC,SAAS,CAACL,QAAQ,CAACM,IAAI,CAAC,CAAC,CAAE;AAC7DJ,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEH,QAAQ,CAACM,IAAI,CAACC,KAAK,CAAC,CAAE;AACpDrB,QAAQ,CAAC,YAAY,CAAC,CAAE;AAC5B,CAAE,MAAOsB,KAAK,CAAE,CACZ,GAAI,CAAAC,YAAY,CAAG,iCAAiC,CACpD,GAAID,KAAK,CAACR,QAAQ,CAAE,CAChBF,OAAO,CAACU,KAAK,CAAC,aAAa,CAAEA,KAAK,CAACR,QAAQ,CAACM,IAAI,CAAC,CACjDR,OAAO,CAACU,KAAK,CAAC,eAAe,CAAEA,KAAK,CAACR,QAAQ,CAACU,MAAM,CAAC,CACrDD,YAAY,CAAGD,KAAK,CAACR,QAAQ,CAACM,IAAI,CAACK,OAAO,EAAIF,YAAY,CAAE;AAChE,CAAC,IAAM,CACHX,OAAO,CAACU,KAAK,CAAC,eAAe,CAAEA,KAAK,CAACG,OAAO,CAAC,CACjD,CACAC,KAAK,CAACH,YAAY,CAAC,CAAE;AACzB,CACJ,CAAC,CAGC,mBACEzB,KAAA,QAAA6B,QAAA,eACE/B,IAAA,OAAA+B,QAAA,CAAI,OAAK,CAAI,CAAC,cACd7B,KAAA,SAAM8B,QAAQ,CAAElB,YAAa,CAAAiB,QAAA,eAC3B/B,IAAA,UACEiC,IAAI,CAAC,MAAM,CACXrB,IAAI,CAAC,UAAU,CACfsB,WAAW,CAAC,UAAU,CACtBC,QAAQ,CAAE1B,YAAa,CACvB2B,QAAQ,MACT,CAAC,cACFpC,IAAA,UACEiC,IAAI,CAAC,UAAU,CACfrB,IAAI,CAAC,UAAU,CACfsB,WAAW,CAAC,UAAU,CACtBC,QAAQ,CAAE1B,YAAa,CACvB2B,QAAQ,MACT,CAAC,cACFpC,IAAA,WAAQiC,IAAI,CAAC,QAAQ,CAAAF,QAAA,CAAC,OAAK,CAAQ,CAAC,EAChC,CAAC,cACP7B,KAAA,MAAA6B,QAAA,EAAG,yBAAuB,cAAA/B,IAAA,MAAGqC,IAAI,CAAC,SAAS,CAAAN,QAAA,CAAC,SAAO,CAAG,CAAC,EAAG,CAAC,EACxD,CAAC,CAEV,CAAC,CAED,cAAe,CAAA5B,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module"}